# ファイル構造

## プロジェクト構造

```
my_history_v2/
├── public/                    # 静的ファイル
│   ├── manifest.json         # PWA マニフェスト
│   ├── robots.txt           # SEO設定
│   ├── assets/              # 画像ファイル
│   │   ├── auth/           # 認証画面用画像
│   │   └── landing/        # ランディングページ用画像
│   ├── data/               # マスターデータ（JSON）
│   │   ├── ginosho.json    # 技能章データ
│   │   ├── grade.json      # 進級課程データ
│   │   ├── ginosho/        # 技能章詳細データ
│   │   └── grade/          # 進級詳細データ
│   └── logos/              # ロゴファイル
├── src/                     # ソースコード
│   ├── App.tsx             # ルートコンポーネント
│   ├── main.tsx            # エントリーポイント
│   ├── errorHandler.tsx    # エラーハンドリング
│   ├── app/                # メインアプリケーション領域
│   │   ├── app.tsx         # アプリメインコンポーネント
│   │   ├── home/           # ホーム画面
│   │   │   ├── leaderHome.tsx   # リーダー向けホーム
│   │   │   └── visitorHome.tsx  # 見学者向けホーム
│   │   ├── parts/          # アプリ共通コンポーネント
│   │   │   └── header.tsx  # アプリヘッダー
│   │   ├── scouts/         # スカウト検索・管理機能
│   │   │   ├── scouts.tsx  # スカウト一覧・検索画面
│   │   │   ├── queryParser.ts    # 検索クエリ解析
│   │   │   └── parts/      # スカウト管理用パーツ
│   │   │       ├── searchBoxCard.tsx  # 検索ボックス
│   │   │       └── result.tsx          # 検索結果表示
│   │   └── scoutDetail/    # スカウト詳細管理
│   │       ├── scoutDetail.tsx     # スカウト詳細画面
│   │       ├── newScoutWizard.tsx  # 新規スカウト登録
│   │       ├── editor.tsx          # スカウト編集画面
│   │       ├── viewer.tsx          # スカウト表示画面
│   │       └── edit/               # 編集コンポーネント
│   │           ├── profile.tsx     # プロフィール編集
│   │           ├── units.tsx       # 所属部門編集
│   │           ├── ginosho.tsx     # 技能章編集
│   │           └── events.tsx      # イベント編集
│   ├── auth/               # 認証領域
│   │   ├── auth.tsx        # 認証メインコンポーネント
│   │   ├── formGroup.tsx   # 共通フォームコンポーネント
│   │   ├── moveCard.tsx    # 画面遷移カード
│   │   ├── Register/       # 新規登録
│   │   │   └── register.tsx
│   │   ├── Reset/          # パスワードリセット
│   │   │   └── reset.tsx
│   │   ├── Signin/         # サインイン
│   │   │   └── signin.tsx
│   │   └── VerifyEmail/    # メール認証
│   │       └── verifyEmail.tsx
│   ├── firebase/           # Firebase関連機能
│   │   ├── authContext.tsx         # 認証コンテキスト
│   │   ├── firebase.ts             # Firebase初期化
│   │   ├── convertTimestampDate.ts # Timestamp変換
│   │   ├── firebaseDataType/       # Firebase型定義
│   │   │   └── users/
│   │   │       └── userRecord.ts
│   │   ├── groupDb/               # グループDB操作
│   │   │   └── getCurrentGroupData.ts
│   │   ├── scoutDb/               # スカウトDB操作
│   │   │   ├── scout.ts           # スカウトデータ操作
│   │   │   └── searchScout.ts     # スカウト検索
│   │   ├── userAuth/              # ユーザー認証機能
│   │   │   ├── createUser.ts      # ユーザー作成
│   │   │   ├── login.ts           # ログイン・ログアウト
│   │   │   └── reset.ts           # パスワードリセット
│   │   └── userData/              # ユーザーデータ操作
│   │       └── getUserData.ts
│   ├── style/              # スタイルコンポーネント
│   │   ├── cardDesign.tsx           # ブラーカード
│   │   ├── fillBackgroundDesign.tsx # 背景画像コンポーネント
│   │   ├── fullscreanPopup.tsx      # フルスクリーンポップアップ
│   │   ├── fullWidthCardHeader.tsx  # 全幅カードヘッダー
│   │   ├── imputGroupUI.tsx         # 入力グループUI
│   │   ├── loadingSplash.tsx        # ローディング画面
│   │   └── showData.tsx             # データ表示コンポーネント
│   ├── sysManager/         # システム管理機能
│   │   └── sysManager.tsx  # 管理者専用画面
│   ├── tools/              # ユーティリティ機能
│   │   ├── getObjectDiff.ts        # オブジェクト差分検出
│   │   ├── getRandomStr.ts         # ランダム文字列生成
│   │   ├── getRandomTrue.ts        # ランダムブール値
│   │   ├── randomTips.ts           # ランダムTips表示
│   │   ├── components/             # ツールコンポーネント
│   │   ├── date/                   # 日付操作
│   │   │   └── convertInputDate.ts
│   │   └── localCache/             # ローカルキャッシュ
│   │       ├── searchQueryCache.ts # 検索クエリキャッシュ
│   │       └── scoutsCache.ts      # スカウトデータキャッシュ
│   └── types/              # TypeScript型定義
│       ├── group/          # グループ型定義
│       │   └── groups.ts
│       ├── master/         # マスターデータ型定義
│       │   ├── ginosho.ts  # 技能章型
│       │   └── grade.ts    # 進級課程型
│       ├── scout/          # スカウト型定義
│       │   ├── scout.ts    # スカウト基本型
│       │   ├── scoutUnit.ts # 所属部門型
│       │   ├── ginosho.ts  # スカウト技能章型
│       │   └── event.ts    # イベント型
│       ├── search/         # 検索型定義
│       │   └── searchQueryType.ts
│       └── user/           # ユーザー型定義
│           ├── user.ts     # ユーザー基本型
│           └── currentGroup.ts # 現在のグループ型
├── staticBuilder/          # スタティック生成ツール
│   ├── main.ts            # メインビルダー
│   ├── builder.ts         # ビルダー実装
│   ├── template.html      # HTMLテンプレート
│   ├── help/              # ヘルプページ生成
│   │   ├── help.tsx       # ヘルプコンポーネント
│   │   ├── article.tsx    # 記事コンポーネント
│   │   ├── markdown/      # Markdownソース
│   │   └── parts/         # ヘルプパーツ
│   └── landing/           # ランディングページ生成
│       ├── landing.tsx    # ランディングコンポーネント
│       └── parts/         # ランディングパーツ
├── masterRecord/          # マスターデータ管理（Python）
│   ├── main.py           # メインスクリプト
│   ├── build.py          # ビルドスクリプト
│   ├── gino.py           # 技能章データ処理
│   ├── ginoDetail.py     # 技能章詳細処理
│   ├── grade.py          # 進級データ処理
│   ├── setting.py        # 設定ファイル
│   └── data/             # CSVソースデータ
├── docs/                 # ドキュメント
├── .github/              # GitHub Actions
│   └── workflows/        # CI/CDワークフロー
├── index.html           # HTMLテンプレート
├── package.json         # 依存関係設定
├── tsconfig.json        # TypeScript設定
├── tsconfig.app.json    # アプリ用TypeScript設定
├── tsconfig.node.json   # Node.js用TypeScript設定
├── vite.config.ts       # Vite設定
├── eslint.config.js     # ESLint設定
├── firebase.json        # Firebase設定
├── firestore.rules      # Firestore セキュリティルール
└── firestore.indexes.json # Firestore インデックス設定
```

## 領域の役割

### Landing 系（StaticBuilder）

- アプリケーションの紹介・宣伝用静的ページ
- TSX + Vite でビルド時に静的 HTML を生成
- ユーザー獲得のためのマーケティングページ
- ヘルプドキュメントの自動生成

### Auth 系 (`/auth`)

- Firebase Authentication を使用した認証機能
- ログイン、新規登録、パスワードリセット、メール認証
- 認証状態の管理とコンテキスト提供
- 認証済みユーザーは自動的にアプリ画面へリダイレクト

### App 系 (`/app`)

- 認証済みユーザー向けのメインアプリケーション
- スカウト検索・管理、個人詳細編集機能
- ロール別のホーム画面（リーダー/見学者）
- リアルタイムデータ同期

### Firebase 系 (`/firebase`)

- 全領域で共通利用する Firebase 関連機能
- 認証コンテキスト、データベース操作、型定義
- ユーザー、スカウト、グループデータの管理

### Style 系 (`/style`)

- UI コンポーネントとデザインシステム
- Bootstrap ベースのカスタムコンポーネント
- レスポンシブデザイン対応

### Tools 系 (`/tools`)

- ユーティリティ関数とヘルパー機能
- データ処理、キャッシュ管理、日付操作
- アプリケーション全体で再利用される機能

### Types 系 (`/types`)

- TypeScript 型定義の集約
- ドメインモデルの型安全性確保
- API レスポンスやフォームデータの型定義

### SysManager 系 (`/sysManager`)

- 管理者専用機能
- システム設定とデータ管理
- 特定ユーザーのみアクセス可能

## 実装状況

- ✅ **完全実装**: Landing（静的生成）, Auth（全認証フロー）, Firebase 設定
- ✅ **基本実装**: App 領域（ホーム、ヘッダー、ルーティング）
- 🚧 **部分実装**: スカウト管理（検索・詳細・編集の基本機能）
- ❌ **未実装**: グループ管理機能、高度な分析機能

## 特徴的な実装

### 1. 静的サイト生成

- `staticBuilder/` で TSX コンポーネントから静的 HTML を生成
- ランディングページとヘルプページを高速配信
- SEO 最適化とパフォーマンス向上

### 2. 型安全性

- 厳密な TypeScript 型定義による開発時エラー防止
- Firebase Firestore のデータ型も厳密に管理
- コンポーネント間のデータ受け渡しも型安全

### 3. パフォーマンス最適化

- React 18 の Suspense と lazy loading による最適化
- Vite の高速ビルドと HMR
- ローカルキャッシュによるデータ取得の最適化

### 4. マスターデータ管理

- Python スクリプトによる CSV から JSON への変換
- ボーイスカウト用の技能章・進級課程データを管理
- ビルド時に最新データを静的ファイルとして組み込み
